@using Sandbox;
@using Sandbox.UI;
@namespace Punt.UI

<root class="warning-panel @(IsShowing ? "visible" : "hidden")">
    <div class="warning-content">
        @Message
    </div>
</root>

@code
{
    public static WarningPanel Instance { get; private set; }

    private bool IsShowing { get; set; } = false;
    private string Message { get; set; } = "";

    public WarningPanel()
    {
        Instance = this;
    }

    /// <summary>
    /// Show a warning message that will fade out after the specified duration
    /// </summary>
    /// <param name="message">The warning message to display</param>
    /// <param name="duration">How long to display the warning in seconds (default: 2s)</param>
    public async void Show(string message, float duration = 0.5f)
    {
        Message = message;
        IsShowing = true;
        StateHasChanged();

        // Schedule auto-hide
        await Task.DelaySeconds(duration);

        if (IsShowing)
        {
            Hide();
        }
    }

    /// <summary>
    /// Manually hide the warning panel
    /// </summary>
    public void Hide()
    {
        IsShowing = false;
        StateHasChanged();
    }

    protected override int BuildHash()
    {
        return System.HashCode.Combine(base.BuildHash(), IsShowing, Message);
    }
}
